{"ast":null,"code":"import { FETCH_ORDERS, FETCH_ORDER_WITH_DETAILS } from \"./types\";\nimport { apiConfig } from \"./config\";\nimport { adalApiFetch, authContext } from \"../adal/config\";\nexport var fetchOrders = function fetchOrders() {\n  return function (dispatch) {\n    adalApiFetch(fetch, apiConfig.endPoint + \"/orders/get\", {\n      mode: \"no-cors\",\n      method: \"GET\",\n      withCredentials: true,\n      credentials: \"include\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + authContext.getCachedToken(authContext.config.clientId),\n        \"Content-Type\": \"application/json\"\n      })\n    }) // var token = authContext.getCachedToken(authContext.config.clientId);\n    // fetch(apiConfig.endPoint + \"/orders/get\", {\n    //   // mode: \"no-cors\"\n    //   // method: \"GET\",\n    //   // headers: {\n    //   //   Authorization: \"Bearer \" + token,\n    //   //   \"Content-Type\": \"application/json\"\n    //   // }\n    // })\n    .then(function (res) {\n      return res.json();\n    }, function (err) {\n      return console.error(err);\n    }).then(function (orders) {\n      return dispatch({\n        type: FETCH_ORDERS,\n        payload: orders\n      });\n    });\n  };\n};\nexport var fetchFullOrder = function fetchFullOrder(orderId) {\n  return function (dispatch) {\n    fetch(apiConfig.endPoint + \"/orders/getFullOrder/\" + orderId, {\n      mode: \"no-cors\",\n      method: \"GET\",\n      headers: apiConfig.getHeader()\n    }, \"\").then(function (res) {\n      return res.json();\n    }).then(function (fullOrder) {\n      return dispatch({\n        type: FETCH_ORDER_WITH_DETAILS,\n        payload: fullOrder\n      });\n    });\n  };\n};","map":{"version":3,"sources":["C:\\Leo\\Apps\\OrdersMgr\\orders-ui\\src\\actions\\orderAction.js"],"names":["FETCH_ORDERS","FETCH_ORDER_WITH_DETAILS","apiConfig","adalApiFetch","authContext","fetchOrders","dispatch","fetch","endPoint","mode","method","withCredentials","credentials","headers","Headers","Authorization","getCachedToken","config","clientId","then","res","json","err","console","error","orders","type","payload","fetchFullOrder","orderId","getHeader","fullOrder"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,wBAAvB,QAAuD,SAAvD;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,gBAA1C;AACA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAM,UAAAC,QAAQ,EAAI;AAC3CH,IAAAA,YAAY,CAACI,KAAD,EAAQL,SAAS,CAACM,QAAV,GAAqB,aAA7B,EAA4C;AACtDC,MAAAA,IAAI,EAAE,SADgD;AAEtDC,MAAAA,MAAM,EAAE,KAF8C;AAGtDC,MAAAA,eAAe,EAAE,IAHqC;AAItDC,MAAAA,WAAW,EAAE,SAJyC;AAKtDC,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnBC,QAAAA,aAAa,EACX,YAAYX,WAAW,CAACY,cAAZ,CAA2BZ,WAAW,CAACa,MAAZ,CAAmBC,QAA9C,CAFK;AAGnB,wBAAgB;AAHG,OAAZ;AAL6C,KAA5C,CAAZ,CAWE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBF,KAoBGC,IApBH,CAoBQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KApBX,EAoB2B,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAJ;AAAA,KApB9B,EAqBGH,IArBH,CAqBQ,UAAAM,MAAM;AAAA,aACVnB,QAAQ,CAAC;AACPoB,QAAAA,IAAI,EAAE1B,YADC;AAEP2B,QAAAA,OAAO,EAAEF;AAFF,OAAD,CADE;AAAA,KArBd;AA2BD,GA5B0B;AAAA,CAApB;AA8BP,OAAO,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO;AAAA,SAAI,UAAAvB,QAAQ,EAAI;AACnDC,IAAAA,KAAK,CACHL,SAAS,CAACM,QAAV,GAAqB,uBAArB,GAA+CqB,OAD5C,EAEH;AACEpB,MAAAA,IAAI,EAAE,SADR;AAEEC,MAAAA,MAAM,EAAE,KAFV;AAGEG,MAAAA,OAAO,EAAEX,SAAS,CAAC4B,SAAV;AAHX,KAFG,EAOH,EAPG,CAAL,CASGX,IATH,CASQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KATX,EAUGF,IAVH,CAUQ,UAAAY,SAAS;AAAA,aACbzB,QAAQ,CAAC;AACPoB,QAAAA,IAAI,EAAEzB,wBADC;AAEP0B,QAAAA,OAAO,EAAEI;AAFF,OAAD,CADK;AAAA,KAVjB;AAgBD,GAjBoC;AAAA,CAA9B","sourcesContent":["import { FETCH_ORDERS, FETCH_ORDER_WITH_DETAILS } from \"./types\";\r\nimport { apiConfig } from \"./config\";\r\nimport { adalApiFetch, authContext } from \"../adal/config\";\r\nexport const fetchOrders = () => dispatch => {\r\n  adalApiFetch(fetch, apiConfig.endPoint + \"/orders/get\", {\r\n    mode: \"no-cors\",\r\n    method: \"GET\",\r\n    withCredentials: true,\r\n    credentials: \"include\",\r\n    headers: new Headers({\r\n      Authorization:\r\n        \"Bearer \" + authContext.getCachedToken(authContext.config.clientId),\r\n      \"Content-Type\": \"application/json\"\r\n    })\r\n  })\r\n    // var token = authContext.getCachedToken(authContext.config.clientId);\r\n    // fetch(apiConfig.endPoint + \"/orders/get\", {\r\n    //   // mode: \"no-cors\"\r\n    //   // method: \"GET\",\r\n    //   // headers: {\r\n    //   //   Authorization: \"Bearer \" + token,\r\n    //   //   \"Content-Type\": \"application/json\"\r\n    //   // }\r\n    // })\r\n    .then(res => res.json(), err => console.error(err))\r\n    .then(orders =>\r\n      dispatch({\r\n        type: FETCH_ORDERS,\r\n        payload: orders\r\n      })\r\n    );\r\n};\r\n\r\nexport const fetchFullOrder = orderId => dispatch => {\r\n  fetch(\r\n    apiConfig.endPoint + \"/orders/getFullOrder/\" + orderId,\r\n    {\r\n      mode: \"no-cors\",\r\n      method: \"GET\",\r\n      headers: apiConfig.getHeader()\r\n    },\r\n    \"\"\r\n  )\r\n    .then(res => res.json())\r\n    .then(fullOrder =>\r\n      dispatch({\r\n        type: FETCH_ORDER_WITH_DETAILS,\r\n        payload: fullOrder\r\n      })\r\n    );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}