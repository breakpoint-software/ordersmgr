(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},12:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return l});var n=a(29),r={clientId:"c386fc0f-93f3-40ba-b15b-a02b79896714",tenant:"common",endpoints:{api:"https://ordersgrapi.azurewebsites.net/v1"},cacheLocation:"localStorage"},l=new n.AuthenticationContext(r);Object(n.withAdalLogin)(l,r.endpoints.api)},203:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),i=a.n(l),o=(a(103),a(19)),c=a(17),d=a(21),u=a(20),s=a(22),m=a(28),p=a(25),h=a(87),b=a(40),f={items:[],selectedOrder:{}},g=Object(p.c)({orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ORDERS":return Object(b.a)({},e,{items:t.payload});case"FETCH_ORDER_DETAILS":case"UPDATE_PRODUCT_ORDER":return Object(b.a)({},e,{selectedOrder:t.payload});default:return e}}}),E=[h.a],O=Object(p.d)(g,{},p.a.apply(void 0,E)),y=(a(108),a(12)),v=a(209),j=a(213),T=a(210),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){y.b.logOut()},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=y.b.getCachedUser();return r.a.createElement(v.a,{inverse:!0,fluid:!0,collapseOnSelect:!0},r.a.createElement(v.a.Header,{width:"100%"},r.a.createElement(v.a.Brand,null,r.a.createElement("a",{href:"/"},"Orders of ",e.profile.name))),r.a.createElement(j.a,null,r.a.createElement(T.a,{onClick:this.handleLogout},"Log out")))}}]),t}(n.Component),A=a(208),w=a(212),F=a(207),P=a(11),I=a(211),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleRowClick=function(e){a.props.history.push("orderDetails",{orderId:e.id})},a.dateFormatter=function(e){return e?new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"numeric",day:"2-digit"}).format(new Date(e)):""},a.options={page:1,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"All",value:a.props.orders.length}],sizePerPage:10,pageStartIndex:1,paginationSize:3,prePage:"Prev",nextPage:"Next",firstPage:"First",lastPage:"Last",paginationShowsTotal:a.renderShowsTotal,paginationPosition:"both",onRowClick:a.handleRowClick,defaultSortName:"date",defaultSortOrder:"desc"},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchOrders()}}]),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(P.BootstrapTable,{data:this.props.orders,options:this.options,pagination:!0},r.a.createElement(P.TableHeaderColumn,{isKey:!0,dataField:"id",hidden:!0},"id"),r.a.createElement(P.TableHeaderColumn,{dataField:"description",dataAlign:"left",headerAlign:"left",dataSort:!0,filter:{type:"TextFilter",delay:1e3}},"Description"),r.a.createElement(P.TableHeaderColumn,{dataField:"customer",dataAlign:"left",headerAlign:"left",dataSort:!0,filter:{type:"TextFilter",delay:1e3}},"Customer"),r.a.createElement(P.TableHeaderColumn,{dataField:"date",dataAlign:"center",headerAlign:"center",dataSort:!0,filter:{type:"TextFilter",delay:1e3},dataFormat:this.dateFormatter},"Date"),r.a.createElement(P.TableHeaderColumn,{dataField:"quantity",dataAlign:"right",headerAlign:"right",dataSort:!0,filter:{type:"TextFilter",delay:1e3}},"Quantity"),r.a.createElement(P.TableHeaderColumn,{dataField:"total",dataAlign:"right",headerAlign:"right",dataSort:!0,filter:{type:"TextFilter",delay:1e3}},"Total")))}}]),t}(n.Component),N=Object(I.a)(Object(m.b)(function(e){return{orders:e.orderReducer.items}},{fetchOrders:function(){return function(e){var t=y.b.getCachedToken(y.b.config.clientId);fetch(y.a.endpoints.api+"/orders/get",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then(function(e){return e.json()},function(e){return console.error(e)}).then(function(t){return e({type:"FETCH_ORDERS",payload:t})})}}})(S)),D=a(15),k=a(52),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).handleIncrementItem=function(e,t,n){a.props.updateProductOrder({productId:t.productId,orderId:t.orderId,quantity:t.quantity+1,price:t.unitaryPrice})},a.handleDecrementItem=function(e,t,n){a.props.updateProductOrder({productId:t.productId,orderId:t.orderId,quantity:t.quantity>0?t.quantity-1:0,price:t.unitaryPrice})},a.cellButton=function(e,t,n,l){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return a.handleIncrementItem(e,t,l)}},r.a.createElement(k.b,null))," ",r.a.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return a.handleDecrementItem(e,t,l)}},r.a.createElement(k.a,{color:"red"})))},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchFullOrder(this.props.location.state.orderId)}},{key:"render",value:function(){var e,t=(e={page:1,sizePerPage:[{text:"10",value:"10"}]},Object(D.a)(e,"sizePerPage",10),Object(D.a)(e,"pageStartIndex",1),Object(D.a)(e,"paginationSize",3),Object(D.a)(e,"prePage","Prev"),Object(D.a)(e,"nextPage","Next"),Object(D.a)(e,"firstPage","First"),Object(D.a)(e,"lastPage","Last"),Object(D.a)(e,"paginationShowsTotal",this.renderShowsTotal),Object(D.a)(e,"paginationPosition","both"),e);return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("br",null),r.a.createElement("h4",null,"Order"),r.a.createElement("hr",null),r.a.createElement("div",{className:"panel panel-default "},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("b",null,"Description:\xa0"),this.props.selectedOrder.description),r.a.createElement("div",{className:"col-6"},r.a.createElement("b",null,"Date:\xa0"),this.props.selectedOrder.date)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("b",null," Quantity:"),"\xa0",this.props.selectedOrder.quantity),r.a.createElement("div",{className:"col-6"},r.a.createElement("b",null,"Total:\xa0"),this.props.selectedOrder.total))))),r.a.createElement("br",null),r.a.createElement("h4",null,"Detail"),r.a.createElement("hr",null),r.a.createElement("div",{className:"panel panel-default "},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"container-fluid "},r.a.createElement(P.BootstrapTable,{data:this.props.selectedOrder.details,striped:!0,hover:!0,options:t,pagination:!0,version:"4"},r.a.createElement(P.TableHeaderColumn,{isKey:!0,hidden:!0,dataField:"id"},"id"),r.a.createElement(P.TableHeaderColumn,{dataField:"product",dataAlign:"left",headerAlign:"left"},"Product"),r.a.createElement(P.TableHeaderColumn,{dataField:"unitaryPrice",dataAlign:"right",headerAlign:"right"},"Unitary Price"),r.a.createElement(P.TableHeaderColumn,{dataField:"quantity",dataAlign:"right",headerAlign:"right"},"Quantity"),r.a.createElement(P.TableHeaderColumn,{dataField:"subtotal",dataAlign:"right",headerAlign:"right"},"Subtotal"),r.a.createElement(P.TableHeaderColumn,{dataAlign:"center",headerAlign:"center",dataFormat:this.cellButton,width:"120"},"\xa0"))))))}}]),t}(n.Component),R=Object(m.b)(function(e){return{selectedOrder:e.orderReducer.selectedOrder}},{fetchFullOrder:function(e){return function(t){var a=y.b.getCachedToken(y.b.config.clientId);fetch(y.a.endpoints.api+"/orders/getFullOrder/"+e,{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_ORDER_DETAILS",payload:e})})}},updateProductOrder:function(e){return function(t){var a=y.b.getCachedToken(y.b.config.clientId);console.log(JSON.stringify(e)),fetch(y.a.endpoints.api+"/orders/UpdateProductOrder",{headers:{Accept:"application/json",Authorization:"Bearer "+a,"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return t({type:"FETCH_ORDER_DETAILS",payload:e})})}}})(x),H=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement(w.a,null,r.a.createElement(F.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(N,e)}}),r.a.createElement(F.a,{path:"/orderDetails",exact:!0,render:function(e){return r.a.createElement(R,e)}})))}}]),t}(r.a.Component),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:O},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement(C,null),r.a.createElement("br",null),r.a.createElement(H,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(199),a(201),a(203);i.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(12);Object(n.runWithAdal)(r.b,function(){a(205)},!1)}},[[96,2,1]]]);
//# sourceMappingURL=main.5a67e4ea.chunk.js.map